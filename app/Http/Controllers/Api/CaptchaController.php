<?php

namespace App\Http\Controllers\Api;

use App\Helpers\ApiResponseHelper;
use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Http;
use Mews\Captcha\Captcha;

class CaptchaController extends Controller
{
    public function view()
    {
        return captcha_img();
        // $captcha = new Captcha();

        // // Generate a CAPTCHA key
        // return $captchaKey = $captcha->generate();

        $base64Image = "data:image/png;base64,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";

        // Remove the data:image/png;base64, part from the base64 string
        $base64Image = str_replace('data:image/png;base64,', '', $base64Image);

        // Decode the base64 image data
        $imageData = base64_decode($base64Image);

        // Create a response with the image data
        return response($imageData)
            ->header('Content-Type', 'image/png');

        return ApiResponseHelper::apiResponse('Success', '200', 'captcha image sent', captcha_src('math'));
    }
}
