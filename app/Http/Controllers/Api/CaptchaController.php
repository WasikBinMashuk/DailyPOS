<?php

namespace App\Http\Controllers\Api;

use App\Helpers\ApiResponseHelper;
use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Http;

class CaptchaController extends Controller
{
    public function view()
    {
        return $response = Http::get('http://127.0.0.1:8000/captcha/api/math');

        $jsonData = $response->json();

        dd($jsonData);

        $base64Image = "data:image/png;base64,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";

        // Remove the data:image/png;base64, part from the base64 string
        $base64Image = str_replace('data:image/png;base64,', '', $base64Image);

        // Decode the base64 image data
        $imageData = base64_decode($base64Image);

        // Create a response with the image data
        return response($imageData)
            ->header('Content-Type', 'image/png');

        return ApiResponseHelper::apiResponse('Success', '200', 'captcha image sent', captcha_src('math'));
    }
}
